webpackJsonp([12],{1030:function(e,r,t){r=e.exports=t(185)(),r.push([e.i,"#Register{font-size:12px;width:800px;margin:0 auto;clear:both;overflow:hidden;color:#333;margin-bottom:100px;margin-top:30px}#Register .breadcrumb .active{color:#e73c44}#Register .content h2{color:#ec666c;font-size:30px;margin-bottom:10px}#Register .content h3{color:#c3767a;margin:0;font-size:18px}#Register .content input{width:95%;padding:0 8px;border-radius:5px;line-height:40px;height:40px;border:1px solid #d5d5d5;color:#666;margin-top:20px;outline:none;background:#eaeaea}#Register .content p{color:#666;padding-left:8px;margin-top:5px}#Register .content p a{color:#ff8c00}#Register .content .check{width:72%}#Register .content input[type=button]{margin-left:3%;width:20%;text-align:center;background:#e54d42;cursor:pointer;color:#fff}#Register .content input[type=checkbox]{width:15px;height:15px;float:left;margin-top:0}#Register .content input[type=button]:hover{background:#e42121}#Register .content h4{color:#ff8c00;font-size:18px;margin-top:8px}#Register .content button{border:none;width:95%;margin-top:30px;text-align:center;background:#e73c44;color:#fff;border-radius:5px;font-size:22px;height:40px;line-height:40px;cursor:pointer}#Register .content button:hover{background:#e42121}#Register .content .label{clear:both;overflow:hidden;width:100%;display:block;margin-top:15px;margin-bottom:20px}#Register .content .label span{float:left}",""])},1049:function(e,r){e.exports='<my-header></my-header>\r\n<div id="Register">\r\n\t<div class="breadcrumb">\r\n\t\t您当前的位置：\r\n\t\t<a >首页</a>&gt;\r\n\t\t<a class="active" >注册</a>\r\n\t</div>\r\n\t<form [formGroup]="registerForm">\r\n\t\t<div class="content">\r\n\t\t\t\r\n\t\t\t<h2>账号注册</h2>\r\n\t\t\t\x3c!-- <h3>火速游戏欢迎您的加入！</h3> --\x3e\r\n\t\t\t<input type="text" name="userName" id="userName" formControlName="userName" placeholder="创建帐号（手机号）" />\r\n\t\t\t<p style="color: red;">{{formErrors.userName}}</p>\r\n\t\t\t<p>建议使用手机号码\x3c!-- 或邮箱注册 --\x3e;用户名为4~20个字符，可使用字母、数字、下划线，需以字母开头</p>\r\n\t\t\t<input class="check" type="text" name="mobileCode" id="mobileCode" formControlName="mobileCode" placeholder="输入手机验证码" />\r\n\t\t\t<input type="button" name="" id="" value="获取验证码" onclick="countDown(this, 60, document.getElementById(\'userName\'))" (click)="getMobileCode()" />\r\n\t\t\t<p style="color: red;">{{formErrors.mobileCode}}</p>\r\n\t\t\t<fieldset aria-required="true" formGroupName="passwordGroup" style="border: none;">\r\n\t\t\t\t<input type="password" name="password" id="password" formControlName="password" placeholder="设置密码" (keyup)="passwordValChanged()" />\r\n\t\t\t\t<p style="color: red;">{{formErrors[\'passwordGroup.password\']}}</p>\r\n\t\t\t\t<p>6~20个字符，区分大小写，推荐使用数字+字母组合</p>\r\n\t\t\t\t<input type="password" name="passwordAgain" id="passwordAgain" formControlName="passwordAgain" (keyup)="repeatPassword()" placeholder="确认密码" />\r\n\t\t\t\t<p style="color: red;">{{formErrors[\'passwordGroup.passwordAgain\']}}</p>\r\n\t\t\t</fieldset>\r\n\t\t\t<h4>网络游戏实名注册和防沉迷验证</h4>\r\n\t\t\t<input type="text" name="realName" id="realName" formControlName="realName" placeholder="请输入真实姓名 如张三" />\r\n\t\t\t<p style="color: red;">{{formErrors.realName}}</p>\r\n\t\t\t<input type="text" name="identityCode" id="identityCode" formControlName="identityCode" placeholder="请输入真实姓名对应的身份证号" /><br />\r\n\t\t\t<p style="color: red;">{{formErrors.identityCode}}</p>\r\n\t\t\t<label class="label"><input type="checkbox" checked name="agreeProtocol" id="agreeProtocol" formControlName="agreeProtocol" value="1" /><span>我已看过并同意<a href="{{agreementUrl}}" target="_blank">《注册协议》</a></span></label>\r\n\t\t\t<p style="color: red;">{{formErrors[\'agreeProtocol\']}}</p>\r\n\t\t\t<p>已有账号，去<a [routerLink]="[\'/login\']">登录</a></p>\r\n\t\t\t\x3c!-- <button type="button" [disabled]="!registerForm.valid" (click)="register(registerForm.value)">立即注册</button> --\x3e\r\n\t\t\t<button type="button" (click)="register(registerForm.value)">立即注册</button>\r\n\t\t</div>\r\n\t</form>\r\n</div>\r\n<my-footer></my-footer>'},1082:function(e,r,t){var o=t(1030);e.exports="string"==typeof o?o:o.toString()},945:function(e,r,t){"use strict";var o=this&&this.__decorate||function(e,r,t,o){var i,n=arguments.length,s=n<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,r,t,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(n<3?i(s):n>3?i(r,t,s):i(r,t))||s);return n>3&&s&&Object.defineProperty(r,t,s),s},i=this&&this.__metadata||function(e,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,r)},n=t(1),s=t(267),a=t(436),d=t(967),p=t(435),c=t(434),l=t(998),u=function(){function e(){}return e}();u=o([n.NgModule({imports:[s.ReactiveFormsModule,a.SharedModule,p.HeaderModule,c.FooterModule,l.routing],declarations:[d.RegisterComponent]}),i("design:paramtypes",[])],u),r.RegisterModule=u},967:function(e,r,t){"use strict";var o=this&&this.__decorate||function(e,r,t,o){var i,n=arguments.length,s=n<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,r,t,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(n<3?i(s):n>3?i(r,t,s):i(r,t))||s);return n>3&&s&&Object.defineProperty(r,t,s),s},i=this&&this.__metadata||function(e,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,r)},n=t(1),s=t(36),a=t(267),d=t(437),p=t(186),c=function(){function e(e,r,t,o){this.router=e,this.userService=r,this.formBuilder=t,this.commonService=o,this.formErrors={userName:"",mobileCode:"","passwordGroup.password":"","passwordGroup.passwordAgain":"",realName:"",identityCode:""},this.validationMessage={userName:{required:"用户名必须填写",minlength:"用户名太短",maxlength:"用户名太长"},"passwordGroup.password":{required:"请输入密码",minlength:"密码太短",maxlength:"密码太长"},"passwordGroup.passwordAgain":{compare:"两次密码不一致"},mobileCode:{required:"手机验证码必须填写"},realName:{required:"真实姓名必须填写"},identityCode:{required:"身份证号码必须填写"}}}return e.prototype.ngAfterViewInit=function(){this.commonService.loadScript("assets/js/common-event.js")},e.prototype.ngOnInit=function(){var e=this;this.registerForm=this.formBuilder.group({userName:["",[a.Validators.required,a.Validators.minLength(4),a.Validators.maxLength(20)]],passwordGroup:this.formBuilder.group({password:["",[a.Validators.required,a.Validators.minLength(6),a.Validators.maxLength(20)]]}),mobileCode:[""],realName:["",[a.Validators.required]],identityCode:["",[a.Validators.required]],agreeProtocol:[!0]});var r=this.registerForm.controls.passwordGroup;r.controls.password;r.addControl("passwordAgain",new a.FormControl("",[a.Validators.required])),this.registerForm.valueChanges.subscribe(function(r){return e.onValueChanged(r)}),console.log(this.registerForm),this.commonService.navSelect(7),this.agreementUrl=this.userService.getagreementUrl()},e.prototype.repeatPassword=function(){return this.registerForm.get("passwordGroup.password").value!=this.registerForm.get("passwordGroup.passwordAgain").value?(this.formErrors["passwordGroup.passwordAgain"]=this.validationMessage["passwordGroup.passwordAgain"].compare,!1):(this.formErrors["passwordGroup.passwordAgain"]="",!0)},e.prototype.passwordValChanged=function(){this.registerForm.controls.passwordGroup.controls.passwordAgain.reset()},e.prototype.onValueChanged=function(e){for(var r in this.formErrors)if("passwordGroup.passwordAgain"!=r){this.formErrors[r]="";var t=this.registerForm.get(r);if(t&&t.dirty&&!t.valid){var o=this.validationMessage[r];for(var i in t.errors)this.formErrors[r]+=o[i]+""}}},e.prototype.checkAgree=function(){return this.registerForm.get("agreeProtocol").value?(this.formErrors.agreeProtocol="",!0):(this.formErrors.agreeProtocol="请同意注册协议",!1)},e.prototype.checkForm=function(){for(var e in this.formErrors)if("passwordGroup.passwordAgain"!=e){this.formErrors[e]="";var r=this.registerForm.get(e);if(r.invalid){var t=this.validationMessage[e];for(var o in r.errors)this.formErrors[e]+=t[o]+""}}return this.repeatPassword()&&this.registerForm.valid&&this.checkAgree()},e.prototype.register=function(e){var r=this;if(this.checkForm()&&""!=this.registerForm.get("userName").value){var t=/^1[34578]\d{9}$/,o=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;t.test(this.registerForm.get("userName").value)||o.test(this.registerForm.get("userName").value)?this.userService.checkUser(this.registerForm.get("userName").value).then(function(t){0==t.error_code?r.userService.userRegister(e).then(function(e){r.errorCode=e.error_code,r.msg=e.msg,alert(r.msg),0==r.errorCode&&r.router.navigate(["/home"])}).catch(r.handleError):r.formErrors.userName=t.msg}):this.formErrors.userName="账号格式不正确"}},e.prototype.getMobileCode=function(){var e=this.registerForm.get("userName").value,r=/^1[34578]\d{9}$/,t=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;return r.test(e)||t.test(e)?this.userService.getMobileCode(e).then(function(e){console.log(e)}):alert("账号格式不正确"),!1},e.prototype.handleError=function(e){return console.error("An error occurred",e),Promise.reject(e.message||e)},e}();c=o([n.Component({selector:"my-register",template:t(1049),styles:[t(1082)],providers:[d.UserService]}),i("design:paramtypes",["function"==typeof(l=void 0!==s.Router&&s.Router)&&l||Object,"function"==typeof(u=void 0!==d.UserService&&d.UserService)&&u||Object,"function"==typeof(m=void 0!==a.FormBuilder&&a.FormBuilder)&&m||Object,"function"==typeof(g=void 0!==p.CommonService&&p.CommonService)&&g||Object])],c),r.RegisterComponent=c;var l,u,m,g},998:function(e,r,t){"use strict";var o=t(36),i=t(967);r.routing=o.RouterModule.forChild([{path:"",component:i.RegisterComponent}])}});