InitLogin=function(){function r(){var e=this;$("#mlp_login").on("click",function(){e.login()}),$("#rp_getcode").on("click",function(){e.regSendSMS()}),$("#rp_reg_phone").on("click",function(){e.reg()}),$("#fwp_getcode").on("click",function(){e.finePwdSendSMS()}),$("#fwp_ok").on("click",function(){e.findPwd()}),$("#rp_reg_ok").on("click",function(){e.retuser()}),$("#qqLoginBtn").on("click",function(){$("#WindowViewCloseMenu").show(),e.qqLogin()})}return r.showNotice=function(e){$("#noticeDiv").html(e),$("#noticeDiv").show(),$("#noticeDiv").delay(2e3).fadeOut()},r.prototype.login=function(){var e=$("#login_username").val(),o=$("#login_password").val();e.length&&o.length?window.parent.sdkModule.sdkLogin(e,o):r.showNotice("用户名或密码不能为空")},r.prototype.reg=function(){var e=$("#reg_username").val(),o=$("#reg_password").val(),s=$("#reg_code").val();e=$.trim(e),o=$.trim(o),s=$.trim(s),e.length&&o.length&&s.length?new RegExp(/^1(3[0-9]|4[57]|5[0-35-9]|7[0135678]|8[0-9])\d{8}/i).test(e)?o.length<6?r.showNotice("密码不能少于6个字"):window.parent.sdkModule.mobile_register(e,o,s):r.showNotice("手机号格式不正确"):r.showNotice("验证信息不能为空")},r.prototype.retuser=function(){var e=$("#reg_username_account").val(),o=$("#reg_password_account").val();6<e.length&&RegExp(/^[a-z|A-Z|0-9]{6,16}$/g).test(e)?5<o.length&&o.length<17?window.parent.sdkModule.register(e,o):r.showNotice("密码必须6-16位,"):r.showNotice("账号为小写字母和1-9")},r.prototype.findPwd=function(){var e=$("#fwp_phone").val(),o=$("#fwp_pwd").val(),s=$("#fwp_code").val();e=$.trim(e),o=$.trim(o),s=$.trim(s),e.length&&o.length&&s.length?new RegExp(/^1(3[0-9]|4[57]|5[0-35-9]|7[0135678]|8[0-9])\d{8}/i).test(e)?o.length<6?r.showNotice("密码不能少于6个字"):window.parent.sdkModule.update_password(e,o,s):r.showNotice("手机号格式不正确"):r.showNotice("手机号、密码、验证码不能为空")},r.prototype.regSendSMS=function(){var e=this;console.log("send-sms");var o=$.trim($("#reg_username").val());if(console.log(o),""===o)return r.showNotice("手机号码未填写"),!1;if(!/^1(3[0-9]|4[57]|5[0-35-9]|7[0135678]|8[0-9])\d{8}/i.test(o)||11!=o.length)return r.showNotice("手机号格式不正确"),!1;var s=new Date,t=Date.parse(s).toString().substr(0,10);e.session_sms=o+"_"+s.getFullYear()+s.getMonth()+s.getDate(),console.log(e.session_sms);var n="#rp_getcode",i=sessionStorage.getItem(e.session_sms);console.log(i),null!=i?60<=t-i?(e._sms_count=60,sessionStorage.setItem(e.session_sms,t),window.parent.sdkModule.send_sms(o),r.showNotice("发送成功")):(e._sms_count=t-i,r.showNotice("验证码未过期"),$(n).removeAttr("onclick"),$(n).text(this._sms_count+"秒后重发")):(e._sms_count=60,sessionStorage.setItem(e.session_sms,t),window.parent.sdkModule.send_sms(o),r.showNotice("发送成功")),$(n).addClass("cur"),e.countSms(n)},r.prototype.finePwdSendSMS=function(){var e=this;console.log("send-sms");var o=$.trim($("#fwp_phone").val());if(console.log(o),""===o)return r.showNotice("手机号码未填写"),!1;if(!/^1(3[0-9]|4[57]|5[0-35-9]|7[0135678]|8[0-9])\d{8}/i.test(o)||11!=o.length)return r.showNotice("手机号格式不正确"),!1;var s=new Date,t=Date.parse(s).toString().substr(0,10);e.session_sms=o+"_"+s.getFullYear()+s.getMonth()+s.getDate(),console.log(e.session_sms);var n="#fwp_getcode",i=sessionStorage.getItem(e.session_sms);console.log(i),null!=i?60<=t-i?(e._sms_count=60,sessionStorage.setItem(e.session_sms,t),window.parent.sdkModule.send_sms_up(o),r.showNotice("发送成功")):(e._sms_count=t-i,r.showNotice("验证码未过期"),$(n).removeAttr("onclick"),$(n).text(this._sms_count+"秒后重发")):(e._sms_count=60,sessionStorage.setItem(e.session_sms,t),window.parent.sdkModule.send_sms_up(o),r.showNotice("发送成功")),$(n).addClass("cur"),e.countSms(n)},r.prototype.countSms=function(e){var o=this;if(this._sms_count--,this._sms_count<=0)return $(e).removeClass("cur"),sessionStorage.removeItem(o.session_sms),void $(e).text("获取验证码");$(e).removeAttr("onclick"),$(e).text(this._sms_count+"秒后重发"),setTimeout(function(){o.countSms(e)},1e3)},r.prototype.qqLogin=function(){var e={app_id:window.parent.sdkModule.appid,client_id:"",deviceType:"qq",usertoken:sessionStorage.getItem("gn_h5_token_"+window.parent.sdkModule.appid)};e=window.btoa(JSON.stringify(e)),$("#Netframe iframe").prop("src","/public/qqlogin/index.php?param="+e),$("#gameframe").hide(),$("#userInfoDiv").hide(),$("#loginWinpop").hide(),window.parent.sdkModule.Isloaded&&$(".gray").css("z-index","999"),$("#Netframe").css("z-index","1000"),$("#Netframe").show()},r}(),window.InitLogin=new InitLogin;